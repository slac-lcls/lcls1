

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Processing &mdash; PyDataSource 0.6.9 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PyDataSource 0.6.9 documentation" href="index.html"/>
        <link rel="next" title="PyDataSource.AddOn" href="generated/PyDataSource.AddOn.html"/>
        <link rel="prev" title="Data Access Overview" href="data_access.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PyDataSource
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data_access.html">Data Access Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-data">Tutorial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-visualization">Data visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#make-a-histogram">Make a Histogram</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-parameters">Setting Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#count-photons">Count Photons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#make-projections">Make Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-module">Custom Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#addon-class-api">AddOn Class API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.html">PyDataSource.AddOn</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#attributes">Attributes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.count.html">PyDataSource.AddOn.count</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.histogram.html">PyDataSource.AddOn.histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.module.html">PyDataSource.AddOn.module</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.parameter.html">PyDataSource.AddOn.parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.peak.html">PyDataSource.AddOn.peak</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.projection.html">PyDataSource.AddOn.projection</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.property.html">PyDataSource.AddOn.property</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/PyDataSource.AddOn.psplot.html">PyDataSource.AddOn.psplot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xarray.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_summary.html">Summarizing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_data.html">Configuration Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="meta_data.html">Meta Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="apps.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_html.html">Run Summary Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="exp_summary.html">Experiment Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="offbyone.html">Off-by-one Timing Error Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Submitting Batch Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Updating Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">PyDatSource API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyDataSource</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Processing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/data_processing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-processing">
<span id="id1"></span><h1>Data Processing<a class="headerlink" href="#data-processing" title="Permalink to this headline">¶</a></h1>
<p>With the ‘add’ property for each detector, a collection of methods are provided to add parameters, properties, and reduction/proccesing of data with roi, projection, histogram methods.</p>
<p>We will use some practice data summarized in a table found at this link:
<a class="reference external" href="https://confluence.slac.stanford.edu/display/PSDM/Publicly+Available+Practice+Data">https://confluence.slac.stanford.edu/display/PSDM/Publicly+Available+Practice+Data</a></p>
<div class="section" id="tutorial-data">
<h2>Tutorial Data<a class="headerlink" href="#tutorial-data" title="Permalink to this headline">¶</a></h2>
<p>We start by loading XPP cspad data that shows powder rings from LaB6 sample</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">PyDataSource</span>

<span class="gp">In [2]: </span><span class="n">ds</span>  <span class="o">=</span> <span class="n">PyDataSource</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="s1">&#39;xpptut15&#39;</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="mi">320</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">ds</span><span class="o">.</span><span class="n">configData</span>
<span class="gh">Out[3]: </span><span class="go">&lt; ConfigData: exp=xpptut15:run=320:smd &gt;</span>
<span class="go">*Detectors in group 0 are &quot;BLD&quot; data recorded at 120 Hz on event code 40</span>
<span class="go">*Detectors listed as Controls are controls devices with unknown event code (but likely 40).</span>

<span class="go">Alias                     Group          Rate  Code  Pol. Delay [s]    Width [s]    Source</span>
<span class="gt">------------------------------------------------------------------------------------------------------------------------</span>
<span class="n">EBeam</span>                         <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">EBeam</span><span class="p">)</span>
<span class="n">FEEGasDetEnergy</span>               <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">FEEGasDetEnergy</span><span class="p">)</span>
<span class="n">PhaseCavity</span>                   <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">PhaseCavity</span><span class="p">)</span>
<span class="n">XPP_AIN_01</span>                    <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">XPP</span><span class="o">-</span><span class="n">AIN</span><span class="o">-</span><span class="mo">01</span><span class="p">)</span>
<span class="n">XppEnds_Ipm0</span>                  <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">XppEnds_Ipm0</span><span class="p">)</span>
<span class="n">XppMon_Pim0</span>                   <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">XppMon_Pim0</span><span class="p">)</span>
<span class="n">XppMon_Pim1</span>                   <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">XppMon_Pim1</span><span class="p">)</span>
<span class="n">XppSb2_Ipm</span>                    <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">XppSb2_Ipm</span><span class="p">)</span>
<span class="n">XppSb3_Ipm</span>                    <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">XppSb3_Ipm</span><span class="p">)</span>
<span class="n">cspad</span>                         <span class="mi">1</span> <span class="n">Beam</span> <span class="o">&amp;</span> <span class="mi">120</span> <span class="n">Hz</span>   <span class="mi">140</span>   <span class="n">Pos</span> <span class="mf">0.000559109</span>  <span class="mf">0.000010000</span>  <span class="n">DetInfo</span><span class="p">(</span><span class="n">XppGon</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span><span class="n">Cspad</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="n">opal_1</span>                        <span class="mi">1</span> <span class="n">Beam</span> <span class="o">&amp;</span> <span class="mi">120</span> <span class="n">Hz</span>   <span class="mi">140</span>   <span class="n">Pos</span> <span class="mf">0.000800000</span>  <span class="mf">0.000300000</span>  <span class="n">DetInfo</span><span class="p">(</span><span class="n">XppEndstation</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span><span class="n">Opal1000</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">usbencoder</span>                    <span class="mi">1</span> <span class="n">Beam</span> <span class="o">&amp;</span> <span class="mi">120</span> <span class="n">Hz</span>   <span class="mi">140</span>   <span class="n">Pos</span> <span class="mf">0.000559109</span>  <span class="mf">0.000010000</span>  <span class="n">DetInfo</span><span class="p">(</span><span class="n">XppEndstation</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span><span class="n">USDUSB</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&lt;</span> <span class="n">ConfigData</span><span class="p">:</span> <span class="n">exp</span><span class="o">=</span><span class="n">xpptut15</span><span class="p">:</span><span class="n">run</span><span class="o">=</span><span class="mi">320</span><span class="p">:</span><span class="n">smd</span> <span class="o">&gt;</span>

<span class="gp">In [4]: </span><span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="data-visualization">
<h2>Data visualization<a class="headerlink" href="#data-visualization" title="Permalink to this headline">¶</a></h2>
<p>The cspad image can be visualized using the add.psplot method.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">evt</span><span class="o">.</span><span class="n">cspad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">psplot</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
<span class="go">  psmon plot added -- use the following to view:</span>
<span class="go">  --&gt; psplot -s psanaphi108 -p 12301 cspad_image</span>
<span class="go">  WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">             if default PORT=12301 not available</span>
</pre></div>
</div>
<p>In the image that pops up in a separate window, one can see both rings and background after adjusting the scale bar on the right.</p>
<div class="figure align-center">
<img alt="_images/xpptut15_run320_cspad_rings.jpg" src="_images/xpptut15_run320_cspad_rings.jpg" />
</div>
<p>To view this plot on another machine, first set the environment and then copy the line in the ipython output from above.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.  /reg/g/psdm/etc/ana_env.sh
<span class="nb">source</span> conda_setup
psplot -s psanaphi108 -p <span class="m">12301</span> cspad_image
</pre></div>
</div>
<p>Adjusting the lower threshold to 200 eliminates most of the background leaving the rings.</p>
<div class="figure align-center">
<img alt="_images/xpptut15_run320_cspad_rings_threshold.jpg" src="_images/xpptut15_run320_cspad_rings_threshold.jpg" />
</div>
<p>These plots will be automatically updated for each next event.  This real-time monitoring is generated using the psana psmon package (based on PyQtGraph).  These plots can be viewed on multiple other machines as well as locally (using the zmq protocal).</p>
<p>For another plotting example, open cxi lysozyme crystallography tutorial data.  Plot the image for the DscCsPad (i.e., the front CSpad detector for the CXI 1 um focus SC1 chamber).  Jump to event 14, which has extra background so that there are multiple photons in many of the detector pixels.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">ds</span> <span class="o">=</span> <span class="n">PyDataSource</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="s1">&#39;cxitut13&#39;</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">In [7]: </span><span class="n">ds</span><span class="o">.</span><span class="n">configData</span>
<span class="gh">Out[7]: </span><span class="go">&lt; ConfigData: exp=cxitut13:run=10:smd &gt;</span>
<span class="go">*Detectors in group 0 are &quot;BLD&quot; data recorded at 120 Hz on event code 40</span>
<span class="go">*Detectors listed as Controls are controls devices with unknown event code (but likely 40).</span>

<span class="go">Alias                     Group          Rate  Code  Pol. Delay [s]    Width [s]    Source</span>
<span class="gt">------------------------------------------------------------------------------------------------------------------------</span>
<span class="n">DscCsPad</span>                      <span class="mi">1</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>   <span class="n">Neg</span> <span class="mf">0.000790723</span>  <span class="mf">0.000040000</span>  <span class="n">DetInfo</span><span class="p">(</span><span class="n">CxiDs1</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span><span class="n">Cspad</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="n">EBeam</span>                         <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">EBeam</span><span class="p">)</span>
<span class="n">FEEGasDetEnergy</span>               <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">FEEGasDetEnergy</span><span class="p">)</span>
<span class="n">PhaseCavity</span>                   <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>    <span class="mi">40</span>                                 <span class="n">BldInfo</span><span class="p">(</span><span class="n">PhaseCavity</span><span class="p">)</span>
<span class="o">&lt;</span> <span class="n">ConfigData</span><span class="p">:</span> <span class="n">exp</span><span class="o">=</span><span class="n">cxitut13</span><span class="p">:</span><span class="n">run</span><span class="o">=</span><span class="mi">10</span><span class="p">:</span><span class="n">smd</span> <span class="o">&gt;</span>

<span class="gp">In [8]: </span><span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

<span class="gp">In [9]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">psplot</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
<span class="go">psmon plot added -- use the following to view:</span>
<span class="go">--&gt; psplot -s psanaphi103 -p 12301 DscCsPad_image</span>
<span class="go">WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">           if default PORT=12301 not available</span>

<span class="gp">In [10]: </span><span class="n">evt</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">&lt; EvtDetectors: cxitut13, Run 10, Step -1, Event 14, 04:38:41.3592, [140, 40, 42] &gt;</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/cxitut13_run10_DscCsPad_image_14.jpg" src="_images/cxitut13_run10_DscCsPad_image_14.jpg" />
</div>
</div>
<div class="section" id="make-a-histogram">
<h2>Make a Histogram<a class="headerlink" href="#make-a-histogram" title="Permalink to this headline">¶</a></h2>
<p>Use the add.histogram method to make a histogram to determain the detector gain.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="s1">&#39;calib&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">publish</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">psmon plot added -- use the following to view:</span>
<span class="go">--&gt; psplot -s psanaphi103 -p 12301 DscCsPad_calib_hist</span>
<span class="go">WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">           if default PORT=12301 not available</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/cxitut13_run10_calib_hist_14.jpg" src="_images/cxitut13_run10_calib_hist_14.jpg" />
</div>
</div>
<div class="section" id="setting-parameters">
<h2>Setting Parameters<a class="headerlink" href="#setting-parameters" title="Permalink to this headline">¶</a></h2>
<p>To set a parameters in the detector object for use later, use the add.parameter method.  These parameters can be output in a config file along with all the other actions described in this section, and they will persists for example if the DataSource is reloaded or a module is added or updated.</p>
<p>Moving the cursor to the top of the second peak from the left in the histogram, we find the 1-photon peak is at an x position of ~23 ADU.  Use the add.parameter method to set the gain attribute and use it in making a new photon counts histogram.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">parameter</span><span class="p">(</span><span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">23.</span><span class="p">)</span>

<span class="gp">In [13]: </span><span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">gain</span>

<span class="gp">In [14]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="s1">&#39;calib&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">gain</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;photon_hist&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;photons&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Gain corrected histogram&#39;</span><span class="p">,</span> <span class="n">publish</span><span class="o">=</span><span class="n">Tr</span>
<span class="go">    ...: ue)</span>
<span class="go">psmon plot added -- use the following to view:</span>
<span class="go">--&gt; psplot -s psanaphi103 -p 12301 DscCsPad_photon_hist</span>
<span class="go">WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">           if default PORT=12301 not available</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/cxitut13_run10_photon_hist_14.jpg" src="_images/cxitut13_run10_photon_hist_14.jpg" />
</div>
</div>
<div class="section" id="count-photons">
<h2>Count Photons<a class="headerlink" href="#count-photons" title="Permalink to this headline">¶</a></h2>
<p>Using limist of 12 to 10,000 ADU, and the gain factor of 23 ADU/photon we previously found, we can count the number of X-rays.  First jump to event 22 where there is less background.  Then use the add.count method to count the photons within the limits=(12,10000).  Use the show_info method to print a table of the current event information including results from the histogram and count methods.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;calib&#39;</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">gain</span><span class="o">=</span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">gain</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;photons&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Photon Count&#39;</span><span class="p">)</span>

<span class="gp">In [16]: </span><span class="n">evt</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="gh">Out[16]: </span><span class="go">&lt; EvtDetectors: cxitut13, Run 10, Step -1, Event 22, 04:38:41.4259, [140, 40, 42] &gt;</span>

<span class="gp">In [17]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">show_info</span><span class="p">()</span>
<span class="gh">Out[17]:</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">DscCsPad</span> <span class="n">cxitut13</span><span class="p">,</span> <span class="n">Run</span> <span class="mi">10</span><span class="p">,</span> <span class="n">Step</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">Event</span> <span class="mi">22</span><span class="p">,</span> <span class="mo">04</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mf">41.4259</span><span class="p">,</span> <span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">calib</span>                   <span class="o">&lt;</span><span class="mf">1.137</span><span class="o">&gt;</span> <span class="n">ADU</span>     <span class="n">Calibrated</span> <span class="n">data</span>
<span class="n">image</span>                  <span class="o">&lt;</span><span class="mf">0.8629</span><span class="o">&gt;</span> <span class="n">ADU</span>     <span class="n">Reconstruced</span> <span class="mi">2</span><span class="n">D</span> <span class="n">image</span> <span class="kn">from</span> <span class="nn">calibStore</span> <span class="nn">geometry</span>
<span class="n">raw</span>                  <span class="o">&lt;</span><span class="mf">1.17e+03</span><span class="o">&gt;</span> <span class="n">ADU</span>     <span class="n">Raw</span> <span class="n">data</span>
<span class="n">shape</span>              <span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">185</span><span class="p">,</span> <span class="mi">388</span><span class="p">)</span>         <span class="n">Shape</span> <span class="n">of</span> <span class="n">raw</span> <span class="n">data</span> <span class="n">array</span>
<span class="n">size</span>                    <span class="mi">2296960</span>         <span class="n">Total</span> <span class="n">size</span> <span class="n">of</span> <span class="n">raw</span> <span class="n">data</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">User</span> <span class="n">Defined</span> <span class="n">Histograms</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="n">photon_hist</span>         <span class="o">&lt;</span><span class="mf">1.359e+04</span><span class="o">&gt;</span> <span class="n">photons</span> <span class="n">Gain</span> <span class="n">corrected</span> <span class="n">histogram</span>
<span class="n">calib_hist</span>          <span class="o">&lt;</span><span class="mf">1.359e+04</span><span class="o">&gt;</span> <span class="n">ADU</span>     <span class="n">Histogram</span> <span class="n">of</span> <span class="n">calib</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">Detector</span> <span class="n">Counts</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="n">calib_count</span>          <span class="mf">1.0453e+05</span> <span class="n">photons</span> <span class="n">Photon</span> <span class="n">Count</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">User</span> <span class="n">Defined</span> <span class="n">Parameters</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="n">gain</span>                   <span class="mf">0.043478</span>
</pre></div>
</div>
</div>
<div class="section" id="make-projections">
<h2>Make Projections<a class="headerlink" href="#make-projections" title="Permalink to this headline">¶</a></h2>
<p>Use the add.projection method to make a radial projection of the CSpad data.  Note that it is more accurate as well as faster to compute the radial projection from the calib “unassembled data” rather than the assembled image.  The publish keyword opens a plot, in which we clearly see several diffraction rings.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="n">evt</span><span class="o">.</span><span class="n">DscCsPad</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">projection</span><span class="p">(</span><span class="s1">&#39;calib&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">publish</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">psmon plot added -- use the following to view:</span>
<span class="go">--&gt; psplot -s psanaphi103 -p 12301 DscCsPad_calib_r</span>
<span class="go">WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">           if default PORT=12301 not available</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/cxitut13_run10_DscCsPad_calib_r_22.jpg" src="_images/cxitut13_run10_DscCsPad_calib_r_22.jpg" />
</div>
<p>For another example we go back to the xpptut15 and open up a plot of the ‘opal_1’ camera.  Note that here we use ‘raw’ for the camera data since most cameras are already internally calibrated and do not need pedestal or common mode corrections and are already uniform 2D images, so do not need geometry files to create images.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">evt</span><span class="o">.</span><span class="n">opal_1</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">psplot</span><span class="p">(</span><span class="s1">&#39;raw&#39;</span><span class="p">)</span>
<span class="go">psmon plot added -- use the following to view:</span>
<span class="go">--&gt; psplot -s psanaphi108 -p 12301 opal_1_raw</span>
<span class="go">WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">           if default PORT=12301 not available</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/xpptut15_run320_opal_1_raw.jpg" src="_images/xpptut15_run320_opal_1_raw.jpg" />
</div>
<p>Now make a horizontal projection of the spectrum across the full horizontal range between 300-400 vertically.  i.e., roi = ((0,300),(1024,400))</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">ds</span>  <span class="o">=</span> <span class="n">PyDataSource</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="s1">&#39;xpptut15&#39;</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="mi">320</span><span class="p">)</span>
<span class="gp">In [22]: </span><span class="n">evt</span><span class="o">.</span><span class="n">opal_1</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">projection</span><span class="p">(</span><span class="s1">&#39;raw&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">roi</span><span class="o">=</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">300</span><span class="p">),(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">400</span><span class="p">)),</span> <span class="n">publish</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">psmon plot added -- use the following to view:</span>
<span class="go">--&gt; psplot -s psanaphi108 -p 12301 opal_1_raw_x</span>
<span class="go">WARNING -- see notice when adding for -p PORT specification</span>
<span class="go">           if default PORT=12301 not available</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="_images/xpptut15_run320_opal_1_raw_x.jpg" src="_images/xpptut15_run320_opal_1_raw_x.jpg" />
</div>
</div>
<div class="section" id="custom-module">
<h2>Custom Module<a class="headerlink" href="#custom-module" title="Permalink to this headline">¶</a></h2>
<p>For more advanced processing, an instance of the PyDataSource.Detector class can be created allowing
for flexibility in writing advanced methods.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyDataSource</span>

<span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">PyDataSource</span><span class="o">.</span><span class="n">Detector</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Example module.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">PyDataSource</span><span class="o">.</span><span class="n">Detector</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>A module can then be added to a detector with the add.module method, as in the example below for a
module to process an ‘Imp’ waveform detector.  This module creates filtered waveform numpy arrays
from the waveforms and calculates the peak amplitudes of the filtered waveforms.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">PyDataSource</span>

<span class="gp">In [2]: </span><span class="n">ds</span> <span class="o">=</span> <span class="n">PyDataSource</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="s1">&#39;cxitut13&#39;</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">ds</span><span class="o">.</span><span class="n">configData</span>
<span class="gh">Out[3]: </span><span class="go">&lt; ConfigData: exp=cxitut13:run=30:smd &gt;</span>
<span class="go">*Detectors in group 0 are &quot;BLD&quot; data recorded at 120 Hz on event code 40</span>
<span class="go">*Detectors listed as Controls are controls devices with unknown event code (but likely 40).</span>

<span class="go">Alias                Grp   Description Code Pol   Delay [s]   Width [s] Source                        </span>
<span class="gt">------------------------------------------------------------------------------------------------------</span>
<span class="n">Acqiris</span>                <span class="mi">1</span>  <span class="n">Beam</span> <span class="o">&amp;</span> <span class="mi">120</span><span class="n">Hz</span>  <span class="mi">140</span> <span class="n">Pos</span> <span class="mf">0.000893000</span> <span class="mf">0.000001000</span> <span class="n">DetInfo</span><span class="p">(</span><span class="n">CxiEndstation</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span><span class="n">Acqiris</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="n">EBeam</span>                  <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>   <span class="mi">40</span>                             <span class="n">BldInfo</span><span class="p">(</span><span class="n">EBeam</span><span class="p">)</span>                
<span class="n">FEEGasDetEnergy</span>        <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>   <span class="mi">40</span>                             <span class="n">BldInfo</span><span class="p">(</span><span class="n">FEEGasDetEnergy</span><span class="p">)</span>      
<span class="n">PhaseCavity</span>            <span class="mi">0</span>        <span class="mi">120</span> <span class="n">Hz</span>   <span class="mi">40</span>                             <span class="n">BldInfo</span><span class="p">(</span><span class="n">PhaseCavity</span><span class="p">)</span>          
<span class="n">Sc2Imp</span>                 <span class="mi">1</span>  <span class="n">Beam</span> <span class="o">&amp;</span> <span class="mi">120</span><span class="n">Hz</span>  <span class="mi">140</span> <span class="n">Pos</span> <span class="mf">0.000800000</span> <span class="mf">0.000010000</span> <span class="n">DetInfo</span><span class="p">(</span><span class="n">CxiEndstation</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span><span class="n">Imp</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&lt;</span> <span class="n">ConfigData</span><span class="p">:</span> <span class="n">exp</span><span class="o">=</span><span class="n">cxitut13</span><span class="p">:</span><span class="n">run</span><span class="o">=</span><span class="mi">30</span><span class="p">:</span><span class="n">smd</span> <span class="o">&gt;</span>

<span class="gp">In [4]: </span><span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

<span class="gp">In [5]: </span><span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">show_info</span><span class="p">()</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">Sc2Imp</span> <span class="n">cxitut13</span><span class="p">,</span> <span class="n">Run</span> <span class="mi">30</span><span class="p">,</span> <span class="n">Step</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Event</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">08</span><span class="p">:</span><span class="mo">02</span><span class="p">:</span><span class="mf">29.2884</span><span class="p">,</span> <span class="p">[</span><span class="mi">140</span><span class="p">]</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">waveform</span>           <span class="o">&lt;</span><span class="mf">2.3891e+04</span><span class="o">&gt;</span> <span class="n">V</span>       <span class="n">Waveform</span> <span class="n">array</span>
<span class="n">wftime</span>                     <span class="nb">list</span> <span class="n">s</span>       <span class="n">Waveform</span> <span class="n">sample</span> <span class="n">time</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">User</span> <span class="n">Defined</span> <span class="n">Parameters</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="nb">filter</span>                    <span class="o">&lt;</span><span class="mf">0.0</span><span class="o">&gt;</span>         
<span class="n">signal_width</span>                 <span class="mi">10</span>         
<span class="n">nchannels</span>                     <span class="mi">4</span>         
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">User</span> <span class="n">Defined</span> <span class="n">Properties</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="n">filtered</span>                <span class="o">&lt;</span><span class="mf">28.33</span><span class="o">&gt;</span>         
<span class="n">amplitudes</span>         <span class="mf">24.9</span><span class="p">,</span> <span class="mf">30.4</span><span class="p">,</span> <span class="mf">467.0</span><span class="p">,</span> <span class="mf">9327.7</span>         

<span class="gp">In [6]: </span><span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">&#39;impbox&#39;</span><span class="p">)</span>
<span class="go">Using the path /reg/neh/home4/koglin/conda/arch/x86_64-rhel7-gcc48-opt/python/PyDataSource for impbox</span>
<span class="go">Loading Sc2Imp as &lt;class &#39;impbox.Impbox&#39;&gt; from /reg/neh/home4/koglin/conda/arch/x86_64-rhel7-gcc48-opt/python/PyDataSource</span>

<span class="gp">In [7]: </span><span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">show_info</span><span class="p">()</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">Sc2Imp</span> <span class="n">cxitut13</span><span class="p">,</span> <span class="n">Run</span> <span class="mi">30</span><span class="p">,</span> <span class="n">Step</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Event</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">08</span><span class="p">:</span><span class="mo">02</span><span class="p">:</span><span class="mf">29.2884</span><span class="p">,</span> <span class="p">[</span><span class="mi">140</span><span class="p">]</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">waveform</span>           <span class="o">&lt;</span><span class="mf">2.3891e+04</span><span class="o">&gt;</span> <span class="n">V</span>       <span class="n">Waveform</span> <span class="n">array</span>
<span class="n">wftime</span>                     <span class="nb">list</span> <span class="n">s</span>       <span class="n">Waveform</span> <span class="n">sample</span> <span class="n">time</span>
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">User</span> <span class="n">Defined</span> <span class="n">Parameters</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="nb">filter</span>                    <span class="o">&lt;</span><span class="mf">0.0</span><span class="o">&gt;</span>         
<span class="n">signal_width</span>                 <span class="mi">10</span>         
<span class="n">nchannels</span>                     <span class="mi">4</span>         
<span class="gt">--------------------------------------------------------------------------------</span>
<span class="n">User</span> <span class="n">Defined</span> <span class="n">Properties</span><span class="p">:</span>
<span class="gt">------------------</span>
<span class="n">filtered</span>                <span class="o">&lt;</span><span class="mf">28.33</span><span class="o">&gt;</span>         
<span class="n">amplitudes</span>         <span class="mf">24.9</span><span class="p">,</span> <span class="mf">30.4</span><span class="p">,</span> <span class="mf">467.0</span><span class="p">,</span> <span class="mf">9327.7</span>         
</pre></div>
</div>
<p>The first plot below is the raw input waveforms for the four channels, and the second plot shows the filtered waveforms.
The amplitudes of the filtered waveforms are given in the table above from the show_info method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">PyDataSource</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">PyDataSource</span><span class="o">.</span><span class="n">DataSource</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="s1">&#39;cxitut13&#39;</span><span class="p">,</span><span class="n">run</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">evt</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">&#39;impbox&#39;</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">filtered</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./examples/cxitut13_run30.py">Source code</a>)</p>
<div class="figure" id="id2">
<img alt="_images/cxitut13_run30_00.png" src="_images/cxitut13_run30_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href="./examples/cxitut13_run30_00.png">png</a>, <a class="reference external" href="./examples/cxitut13_run30_00.hires.png">hires.png</a>, <a class="reference external" href="./examples/cxitut13_run30_00.pdf">pdf</a>)</span></p>
</div>
<div class="figure" id="id3">
<img alt="_images/cxitut13_run30_01.png" src="_images/cxitut13_run30_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href="./examples/cxitut13_run30_01.png">png</a>, <a class="reference external" href="./examples/cxitut13_run30_01.hires.png">hires.png</a>, <a class="reference external" href="./examples/cxitut13_run30_01.pdf">pdf</a>)</span></p>
</div>
<p>You could copy this module from the PyDataSource package to your work area, modify as desired and reload with the
path keyword pointing to your work area. e.g.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">evt</span><span class="o">.</span><span class="n">Sc2Imp</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">&#39;impbox&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;~username/work/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="addon-class-api">
<h2>AddOn Class API<a class="headerlink" href="#addon-class-api" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/PyDataSource.AddOn.html#PyDataSource.AddOn" title="PyDataSource.AddOn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn</span></code></a>(ds,&nbsp;alias)</td>
<td>Collection of methods to add parameters, properties, and reduction/proccesing of data with roi, projection, histogram methods.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/PyDataSource.AddOn.count.html#PyDataSource.AddOn.count" title="PyDataSource.AddOn.count"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.count</span></code></a>([attr,&nbsp;gain,&nbsp;unit,&nbsp;doc,&nbsp;roi,&nbsp;…])</td>
<td>Count (i.e., sum) of detector within optional roi.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/PyDataSource.AddOn.histogram.html#PyDataSource.AddOn.histogram" title="PyDataSource.AddOn.histogram"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.histogram</span></code></a>([attr,&nbsp;bins,&nbsp;gain,&nbsp;unit,&nbsp;…])</td>
<td>Make a histogram.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/PyDataSource.AddOn.module.html#PyDataSource.AddOn.module" title="PyDataSource.AddOn.module"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.module</span></code></a>([module])</td>
<td>Add detector module</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/PyDataSource.AddOn.parameter.html#PyDataSource.AddOn.parameter" title="PyDataSource.AddOn.parameter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.parameter</span></code></a>(**kwargs)</td>
<td>Add parameters as keword arguments.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/PyDataSource.AddOn.peak.html#PyDataSource.AddOn.peak" title="PyDataSource.AddOn.peak"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.peak</span></code></a>([attr,&nbsp;ichannel,&nbsp;name,&nbsp;xaxis,&nbsp;…])</td>
<td>Simple 1D peak locator.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/PyDataSource.AddOn.projection.html#PyDataSource.AddOn.projection" title="PyDataSource.AddOn.projection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.projection</span></code></a>([attr,&nbsp;axis,&nbsp;roi,&nbsp;sensor,&nbsp;…])</td>
<td>Make a projection along an axis.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/PyDataSource.AddOn.property.html#PyDataSource.AddOn.property" title="PyDataSource.AddOn.property"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.property</span></code></a>(func_name[,&nbsp;attr])</td>
<td>Add a property that operates on this detector object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/PyDataSource.AddOn.psplot.html#PyDataSource.AddOn.psplot" title="PyDataSource.AddOn.psplot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AddOn.psplot</span></code></a>(*attrs,&nbsp;**kwargs)</td>
<td>Add psplot.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="generated/PyDataSource.AddOn.html" class="btn btn-neutral float-right" title="PyDataSource.AddOn" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="data_access.html" class="btn btn-neutral" title="Data Access Overview" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, SLAC National Accelerator Laboratory.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6.9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>